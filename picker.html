<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TaxiJet — Yandex Map Picker (test)</title>

  <!-- Yandex Maps v3: o'zingizning KEY -->
  <script src="https://api-maps.yandex.ru/v3/?apikey=7d36a2ff-aab5-4c09-8396-3ec8711058ca&lang=uz_UZ"></script>

  <style>
    html, body { height:100%; margin:0 }
    #map { height:100% }
    .log {
      position: fixed; left: 8px; bottom: 8px; right: 8px;
      background: rgba(0,0,0,.7); color: #fff; font: 12px/1.4 monospace;
      padding: 8px; border-radius: 8px; max-height: 40%; overflow:auto; z-index: 9999;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <pre id="log" class="log"></pre>

  <script>
    const log = (...a) => {
      const el = document.getElementById('log');
      el.textContent += a.map(x => (typeof x === 'string' ? x : JSON.stringify(x))).join(' ') + '\n';
    };

    // 1) Skript yuklandimi?
    if (!window.ymaps3) {
      log('❌ ymaps3 yo‘q — script yuklanmadi (kalit yoki referrer muammo).');
    } else {
      log('✅ ymaps3 mavjud, init boshlanmoqda...');
    }

    // 2) Init + xarita
    (async () => {
      try {
        await ymaps3.ready;
        const { YMap, YMapDefaultSchemeLayer, YMapDefaultFeaturesLayer } = ymaps3;
        const map = new YMap(document.getElementById('map'), {
          location: { center: [69.2401, 41.2995], zoom: 11 } // Toshkent
        });
        map.addChild(new YMapDefaultSchemeLayer());
        map.addChild(new YMapDefaultFeaturesLayer());
        log('✅ Xarita yaratildi.');
      } catch (e) {
        console.error(e);
        log('❌ Init xatosi:', e && e.message ? e.message : e);
      }
    })();
  </script>
</body>
</html>
